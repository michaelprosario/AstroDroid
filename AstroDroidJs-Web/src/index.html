<html>

<head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
    <script type="text/javascript" src="index.js"></script>
</head>

<body>
<script>

// todo ... think about a new way to capture user input ....
function onMoveForward(obj: any) {
    obj.emit('OnMoveCommand', { moveRequest: 'forward' }, true);
}

function onMoveBack(obj: any) {
    obj.emit('OnMoveCommand', { moveRequest: 'back' }, true);
}

function onMoveLeft(obj: any) {
    obj.emit('OnMoveCommand', { moveRequest: 'left' }, true);
}

function onMoveRight(obj: any) {
    obj.emit('OnMoveCommand', { moveRequest: 'right' }, true);
}

// #https://stackoverflow.com/questions/46052476/can-a-keyboard-event-be-captured-on-an-aframe-entity
document.addEventListener('keydown', function (event) {
    document.querySelectorAll('.listenonkey').forEach(function (obj) {
        switch (event.key) {
            case 'i':
                onMoveForward(obj);
                break;
            case 'j':
                onMoveLeft(obj);
                break;
            case 'k':
                onMoveBack(obj);
                break;
            case 'l':
                onMoveRight(obj);
                break;
        }
    });
});
</script>

    <a-scene>
        <a-box position="0 0.2 -5" scale="1 0.25 3" rotation="0 0 0" color="#4CC3D9"></a-box>        
        <a-box
        position="0 0 -10"
        scale="1 5 1"
        rotation="0 0 0"
        color="green"
      ></a-box>      

        <a-entity environment="preset: tron"></a-entity>
    </a-scene>
</body>

</html>